[build]
  publish = "docs"
  command = """
    echo "Setting up Go environment..." && \
    export GOPATH=/opt/buildhome/go && \
    export GOBIN=/opt/buildhome/go/bin && \
    export PATH=$PATH:$GOBIN && \
    echo "Go environment:" && \
    echo "GOPATH=$GOPATH" && \
    echo "GOBIN=$GOBIN" && \
    echo "PATH=$PATH" && \
    echo "Installing docute..." && \
    go install github.com/JackalLabs/docute@latest && \
    echo "Docute path:" && \
    which docute && \
    echo "Creating directories..." && \
    mkdir -p docs/dist && \
    cd docs && \
    echo "Running docute generate..." && \
    docute generate
  """

[build.environment]
  GO_VERSION = "1.22.1"
  GOPATH = "/opt/buildhome/go"
  GOBIN = "/opt/buildhome/go/bin"

[[redirects]]
  from = "/*"
  to = "/README.md"
  status = 200
